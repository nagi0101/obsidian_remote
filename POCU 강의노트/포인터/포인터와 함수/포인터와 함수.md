---
Created: 2024-01-03T17:44:00
Updated: 2024-01-03T17:44:00
Course: COMP2200
tags: 
Reviewed: false
---
- [[#값에 의한 전달 vs. 참조에 의한 전달|값에 의한 전달 vs. 참조에 의한 전달]]
- [[#포인터와 함수 반환값|포인터와 함수 반환값]]
	- [[#포인터와 함수 반환값#포인터를 반환해도 되는 경우|포인터를 반환해도 되는 경우]]


## 값에 의한 전달 vs. 참조에 의한 전달
---
- [[../../C 기본 문법&빌드 단계/C 함수/C 함수|C 함수]]에 포인터를 전달 할 때
	- 원본이 바뀌니 -> 참조에 의한 전달?
	- 메모리 주소를 복사했으니 -> 값에 의한 전달?
- 언어 구조적으로 엄밀히 말하면 C는 언제나 변수를 복사함.
	- 모든 것이 값에 의한 전달. C에는 참조에 의한 전달이 존재하지 않음.
	- 단, 포인터를 사용하여 참조에 의한 전달을 흉내낼 뿐임.
- 그러나 프로그래머 입장에서 가장 중요한 것은 원본이 바뀌는지 바뀌지 않는지임.
	- 때문에 의도를 따지자면 참조에 의한 전달이라 말하는 것이 차라리 나음.
- 그러니 포인터를 전달할 때는 참조에 의한 전달이라고 하자.

## 포인터와 함수 반환값
---
- 포인터도 변수이니 포인터를 반환 가능하다. 다만 잘못 쓰면 매우 위험하다.
- 지역 변수의 주소를 반환: 매우 위험한 코드
	- 이런 코드는 절대 짜면 안된다
```c
int* add(const int arg1, const int arg2)
{
    int result = arg1 + arg2;
    return &result;
}

int main(void)
{
    int* result;
    result = add(10, 20);
    return 0;
}
```
![[Pasted image 20231228140455.png]]
- 컴파일러가 경고는 주지만 에러를 일으키지는 않는다.
- 댕글링 포인터(dangling pointer)라는 문제. 
	- 실제로 존재하지 않는 대상을 가리키는 포인터를 의미함
### 포인터를 반환해도 되는 경우
-  전역 변수
- 파일 static 전역변수
- 함수 내 static 변수
- 도우미 함수 안에 생성한 변수를 다른 함수에서 사용할 때
	- but 지역변수는 안 됨
- 함수 안에서 대용량의 데이터 생성 후 이를 반환할 때
	- 힙 메모리에 생성한 데이터
