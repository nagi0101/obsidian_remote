---
Created: 
Updated: 
Course: COMP2200
tags: 
Reviewed: false
---
# 파일 입출력
---
- C는 파일 다루는 기능이 빈약함
- 때문에 파일 관련 연산은 다 이럼
	1. 파일을 열어서 파일 스트림을 가져옴
	2. 그 파일 스트림을 사용해서 하고 싶은 걸 함
	3. 그 파일을 닫아줌

## 파일 열기
---
```c
#include <stdio.h>

#define LENGTH (1024)

FILE* stream;
char list[LENGTH];

stream = fopen("hello.txt", "r");
if (fgets(list, LENGTH, stream) != NULL) {
	printf("%s", list);
}
```

```c
FILE* fopen(const char* filename, const char* mode);
```
- 열기 모드는 아래와 같음
	- r/w/a : 읽기/쓰기/이어씀
		- r의 경우 파일이 없다면 열기에 실패, 나머지는 새 파일을 생성.
		- w는 파일이 있다면 내용을 모두 없앤다.
	- +를 뒤에 붙이면 읽기 & 쓰기용
	- b를 붙이면 이진 모드로 파일을 엶(rb, wb, r+b 등)
		- 유닉스 계열에서는 차이가 없음
		- 윈도우에서는 개행문자 처리만 달라짐
			- 윈도우는 개행할 때 \\r 붙인 다음에 \\n을 붙이기 때문.
			- 파일에서 새 줄을 \\n으로만 저장했다면 두 모드 다 \\n으로 읽음.
	- 자세한 것은 검색해보자.
- `fwrite`로 파일에 쓸 때 파일에 바로 저장되지 않음.
	- 버퍼 때문.
	- \\n이 들어오거나 `fflush()`를 호출해야함.
- fwrite()는 근데 \\n을 \\n으로 인식하지 못함
	- 첫 번째 인자로 받는 buffer는 `void*`임.
	- 따라서 `fflush()`만이 유일한 해결법.
- `fopen()`이 반환하는 파일 스트림은 데이터를 읽을 때마다 파일 위치 표시자가 바뀌어 위치를 기억함.