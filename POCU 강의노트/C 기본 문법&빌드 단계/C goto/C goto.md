---
Created: 2023-12-18T13:53:00
Updated: 2023-12-18T13:53:00
Course: COMP2200
Tags:
  - Best_Practice
  - Grammar
Reviewed: false
---
- [[#goto 문|goto 문]]
- [[#goto는 악마인가?|goto는 악마인가?]]
- [[#==goto 베스트 프랙티스==|goto 베스트 프랙티스]]

## goto 문
---
- C는 위에서 아래로 순차적으로 코드를 실행하나, goto를 쓰면 이 순서를 어기고 다음에 실행할 코드를 지정 가능
- 나쁜 예
    
    ```C
    void do_work(void)
    {
    infinity:
    	printf("work time!\n");
    
    	goto infinity;
    }
    
    // 위의 코드와 같은 동작을 한다
    void do_work(void)
    {
    	while (1) {
    		printf("work time!\n");
    	}
    }
    ```
    
- while, for 등으로 구현한 반복문과 goto로 구현한 반복문은 어셈블리 수준으로 같은 동작을 함.
- 반복문은 결국 goto를 사용하는 코드
    - 어셈블리엔 원래 반복문이란게 없음. 그래서 처음 넘어온 C 초기엔 goto를 많이 씀.
    - 그러나 반복문 쓰는 것이 더 안전함
        - 이건 모두가 동의.
        - 따라서 goto를 자주 쓰지는 않음
    - 하지만 goto를 악마라 하며 절대 쓰지 말라는 사람들도 문제임.
        - 아직까지도 리눅스의 코드베이스에는 goto문을 쓴다.

## goto는 악마인가?
---

- 맞긴 함.
- 그러나 항상 그렇지만은 않음.
- 예시1) 중첩 반복문 탈출
    - goto를 안 쓰는 경우 i, j, k 세 변수를 모두 고려하여 탈출하는 코드를 작성했음
        - 참고로 i 탈출을 검사하는 코드를 for문 안에 쓴건 나쁜 코드임.
        - 쓸데없이 if문을 많이 써야함.
    - goto를 쓰니 코드가 더 깔끔해짐.
- 예시2) 중간에 어느 조건에 맞을 경우 나머지 동작을 뛰어넘고 싶을 경우
	- goto를 안 쓰는 경우
		- pass 변수를 사용하여 동작을 건너뛰다가 마지막에 에러 처리 동작 수행.
		 - early exit을 해도 되지만 이것도 전보다 낫다지 깔끔하지는 않음
            - 함수를 만들면 한 함수에만 쓰이는 함수를 만들게 됨
            - 함수를 만들면 다른 모든 곳에서 호출할 수 있음.
            - 나중에 해당 함수를 수정할 땐 다른 곳에서 사용된 모든 경우에 잘 동작하는지 확인해야…
- 예시3) 함수로 해결이 어려운 경우
    - 스택처럼 1, 2, 3의 연산이 있고 중간에 실패할 경우 이전의 연산을 되돌리는 경우 goto문이 상당히 유용함.
    - 연산은 순서대로, 되돌리는 연산은 반대 순서로 작성 후 goto문으로 되돌려야 하는 연산 위치로 점프
    - 이걸 함수로 해결하려면 상당히 더러워짐.
- 심지어 C#에서도 goto를 지원함.
    - 더 나아가 switch에서도 쓸 수 있음.
    - case 레이블 실행 후 다른 case 레이블로 가고 싶을 경우 goto문을 안 쓰면
        - 코드 중복을 만들거나
        - 함수로 만들어 호출해야함.
    - 위 두 방법 모두 좋은 방법은 아님. 함수도 솔직히 가능하면 코드로 쓰는게 좋음.

## ==goto 베스트 프랙티스==
---
- 기본적으론 안 쓰는게 맞다.
- 언제나 전방(아래쪽)으로 점프할 것.
    - 절차적 언어의 흐름은 따르자. 안 그러고 위아래로 왔다갔다 하면 스파게티 코드 직행이다.
- 내포된(nested) 루프에서 빠져나올 때는 자유롭게 쓸 것.
- 한 함수 안에 있는 여러 개의 조건문이 공통된 코드를 실행해야 할때도 써도 됨
    - 예: 함수 마지막에 성공/오류 조건 처리
    - 이건 약간 캐바케. 함수 만들어서 써도 나쁘진 않음.
- ==그러나 현재 회사의 사수님이 goto를 마녀사냥하시면 그냥 따를것….==
    - 괜사리 나대지 말자.